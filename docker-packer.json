{
  "variables": {
    "docker_user": "{{env `DOCKER_USER`}}",
    "docker_password": "{{env `DOCKER_PASSWORD`}}",
    "docker_email": "{{env `DOCKER_EMAIL`}}"
  },

  "builders":[{
    "type": "docker",
    "image": "ubuntu:precise",
    "commit": true,
    "login_email": "{{user `docker_email`}}",
    "login_username": "{{user `docker_user`}}",
    "login_password": "{{user `docker_password`}}"
  }],

  "provisioners":[
    {
      "type": "shell",
      "script": "./provisioner.sh"
    }
  ],

  "post-processors": [
    [
      {
        "type": "docker-tag",
        "repository": "diamond29/packer",
        "tag": "0.7.2"
      },
      "docker-push"
    ]
  ]
}
